---
import BaseLayout from '../layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';

const projects = (await getCollection('projects')).sort(
  (a, b) => (b.data.date?.valueOf() || 0) - (a.data.date?.valueOf() || 0)
);
---

<BaseLayout title="Personal Projects" description="Showcase of personal programming projects">
  <h1>Personal Projects</h1>

  <p>
    A collection of personal projects I've built to learn new technologies,
    solve interesting problems, or just for fun.
  </p>

  <hr>

  {projects.length === 0 ? (
    <p><em>No projects yet. Check back soon!</em></p>
  ) : (
    projects.map((project) => (
      <div class="project-item">
        <h2>{project.data.title}</h2>
        {project.data.date && (
          <p class="meta">{project.data.date.toLocaleDateString()}</p>
        )}
        <p>{project.data.description}</p>
        
        {project.data.technologies && project.data.technologies.length > 0 && (
          <p><strong>Technologies:</strong> {project.data.technologies.join(', ')}</p>
        )}

        <div style="margin-top: 1em;">
          {project.data.github && (
            <a href={project.data.github} target="_blank">Source Code</a>
          )}
          {project.data.github && project.data.demo && <span> | </span>}
          {project.data.demo && (
            <a href={project.data.demo} target="_blank">Live Demo</a>
          )}
        </div>
      </div>
    ))
  )}
</BaseLayout>
